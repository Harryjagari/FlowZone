<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - WebApplication1</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/WebApplication1.styles.css" asp-append-version="true" />
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Boxicons CSS -->
    <link href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" rel="stylesheet" />

    <!-- Custom CSS -->
    <style>
        /* Fixed sidebar */
        .l-navbar {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            width: 200px; /* Adjust the width as needed */
            padding-top: 70px; /* Adjust the top padding to match the header height */
            background-color: blue; /* Sidebar background color */
            border-right: 1px solid #87CEFA; /* Sidebar border */
            overflow-y: auto; /* Enable scrolling if content exceeds sidebar height */
        }

        /* Adjust main content area */
        .main-content {
            margin-left: 200px; /* Adjust margin to match the sidebar width */
            padding: 15px;
            padding-top:70px;/* Add padding to avoid content touching the sidebar */
        }
    </style>
</head>
<body>
    <header class="header" id="header" style="background-color: white;">
        <div class="header_toggle"><i class='bx bx-menu' id="header-toggle"></i></div>
    </header>

    <!-- Fixed Sidebar -->
    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div>
                <a class="nav_logo" asp-area="" asp-controller="Home" asp-action="Index"><i class='bx bx-layer nav_logo-icon'></i><span class="nav_logo-name">WebApplication1</span> </a>
                <div class="nav_list">
                    <a class="nav_link" asp-area="" asp-controller="Home" asp-action="Index"><i class='bx bx-grid-alt nav_icon'></i><span class="nav_name">Home</span></a>
                    <a class="nav_link" asp-area="" asp-controller="Home" asp-action="Avatars"><i class='bx bx-grid-alt nav_icon'></i><span class="nav_name">Avatars</span></a>
                    <a class="nav_link" asp-area="" asp-controller="Home" asp-action="Challenges"><i class='bx bx-grid-alt nav_icon'></i><span class="nav_name">Challenges</span></a>
                </div>
            </div>
        </nav>
    </div>
    <!-- Main Content -->
    <div class="main-content">
        @RenderBody()
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <!-- Custom Script -->
    <script>
        $(document).ready(function () {
            // Function to toggle the sidebar
            const toggleSidebar = () => {
                $('#nav-bar').toggleClass('show');
                $('#header-toggle').toggleClass('bx-x');
                $('body').toggleClass('body-pd');
                $('#header').toggleClass('body-pd');
            };

            // Check if the sidebar state is stored in session storage
            const sidebarState = sessionStorage.getItem('sidebarState');
            if (sidebarState === 'open') {
                toggleSidebar(); 
            }

            // Toggle sidebar when clicking the header toggle
            $('#header-toggle').click(function () {
                toggleSidebar();

                // Store the state of the sidebar in session storage
                const sidebarState = $('#nav-bar').hasClass('show') ? 'open' : 'closed';
                sessionStorage.setItem('sidebarState', sidebarState);
            });

            // Click event handler for navigation links
            $('.nav_link').click(function () {
                // Add active class only if it's not already added
                if (!$(this).hasClass('active')) {
                    $('.nav_link').removeClass('active');
                    $(this).addClass('active');
                }
            });

            // Click event handler for logo link
            $('.nav_logo').click(function (e) {
                // Check if the sidebar is active
                if ($('#nav-bar').hasClass('show')) {
                    e.preventDefault(); // Prevent the default link behavior
                }
            });
        });
    </script>
</body>
</html>
